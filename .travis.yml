sudo: required
dist: trusty
language: node_js
node_js:
  - '6'

before_script:
- npm install -g angular-cli
- npm install

branches:
  except:
    - /^build-[0-9a-z\-]*/
after_success:
  # CREATE GIT TAG
  - git config --global user.email "builds@travis-ci.com"
  - git config --global user.name "Travis CI"
  - export GIT_TAG=build-$TRAVIS_BRANCH-$(date -u "+%Y-%m-%d")-$TRAVIS_BUILD_NUMBER
  - echo -n $GIT_TAG > public/version
  - git commit -m "Set build VERSION number" public/version
  - git tag $GIT_TAG -a -m "Generated tag from TravisCI build $TRAVIS_BUILD_NUMBER"
  - git push --quiet https://0ab818e2e7a7c8e44c74c2d5c70fa30faf6ea57a@github.com/varung-optimus/demo-travis-integration $GIT_TAG > /dev/null 2>&1

script:
- npm install
